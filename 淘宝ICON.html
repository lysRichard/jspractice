<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
	*{
		margin: 0;
		padding:0;
	}
		/*#div1{
			width: 200px;
			height: 200px;
			background: red;
			position: relative;
			top: 0;
			left: -200px;
		}
		#div1 span{
			position: absolute;
			top: 50px;
			left: 200px;
			height: 100px;
			width: 20px;
			background: blue;
			float: left;
		}*/
		ul li{
			list-style: none;
			width: 200px;
			height: 50px;
			background: yellow;
			margin-top: 20px;
			border: 1px solid #E8E8E8;
		}
	</style>
	<!-- <script type="text/javascript" src="strap.js"></script> -->
</head>
<body>
<!-- <div id="div1"><span></span></div> -->
<ul>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
	<li></li>
</ul>
	<script type="text/javascript">
		// window.onload=function(){
		// 	var ali=document.getElementsByTagName('li');
		// 	for(var i=0;i<ali.length;i++){
		// 		ali[i].timer=null;
		// 		ali[i].onmouseover=function(){
		// 			startMove(this,'opacity',0.3);
		// 		}
		// 		ali[i].onmouseout=function(){
		// 			startMove(this,'opacity',0.8);
		// 		}
		// 	}
		// }
		// function startMove(obj,attr,iTarget,fn){
		// 	clearInterval(obj.timer);
		// 	obj.timer=setInterval(function(){
		// 		var icur=0;
		// 		if(attr=='opacity'){
		// 			icur=Math.round(parseFloat(getStyle(obj,attr))*100);
		// 		}else{
		// 			icur=parseInt(getStyle(obj,attr));
		// 		}
		// 		var speed=(iTarget-icur)/8;
		// 		speed=speed>0?Math.ceil(speed):Math.floor(speed);
		// 		if(icur==iTarget){
		// 			clearInterval(obj.timer);
		// 			if(fn){
		// 				fn();
		// 			}
		// 		}else{
		// 			if(attr=='opacity'){
		// 				obj.style.filter='alpha(opacity:'+(icur+speed)+')'
		// 				obj.style.opacity=(icur+speed)/100;
		// 			}else{
		// 				obj.style[attr]=icur+speed+'px';
		// 			}

		// 		}
		// 	},50);
		// }
		// function getStyle(obj,attr){
		// 	if(obj.currentStyle){
		// 		return obj.currentStyle[attr];
		// 	}else{
		// 		return getComputedStyle(obj,false)[attr];
		// 	}
		// }

		// window.onload=function(){
		// 	var obj1=document.getElementById('div1');
		// 	obj1.onmouseover=function(){
		// 		startMove(0);
		// 	}
		// 	obj1.onmouseout=function(){
		// 		startMove(-200);
		// 	}
		// }
		// var timer=null;
		// function startMove(iTarget){
		// 	var obj1=document.getElementById('div1');
		// 	clearInterval(timer);
		// 	 timer=setInterval(function(){
		// 		var speed=(iTarget-obj1.offsetLeft)/20;
		// 		speed=speed>0?Math.ceil(speed):Math.floor(speed);
		// 		if(iTarget==obj1.offsetLeft){
		// 			clearInterval(timer);
		// 		}else{
		// 			obj1.style.left=obj1.offsetLeft+speed+'px';
		// 		}
		// 	},30);
		// }
		window.onload=function(){
			var ali=document.getElementsByTagName('li');
			for(var i=0;i<ali.length;i++){
				ali[i].timer=null;
				ali[i].onmouseover=function(){
					startMove(this,{height:400});
				}
				ali[i].onmouseout=function(){
					startMove(this,{height:50})
				}
			}
		}
		function startMove(obj,json,fn){
			var flag=true;
			clearInterval(obj.timer);
			obj.timer=setInterval(function(){
				for(var attr in json){
					var icur=0;
					if(attr=='opacity'){
						icur=Math.round(parseFloat(getStyle(obj,attr))*100);
					}else{
						icur=parseInt(getStyle(obj,attr))
					}
					var speed=(json[attr]-icur)/8;
					speed=speed>0?Math.ceil(speed):Math.floor(speed);
					if(icur!=attr){
						flag=false;
						if(attr=='opacity'){
							obj.style.filter='alpha(opacity:'+(speed+icur)+')';
							obj.style.opacity=(icur+speed)/100;
						}else{
							obj.style[attr]=icur+speed+'px';
						}
					}
					if(flag){
						clearInterval(obj.timer);
						if(fn){
							fn();
						}
					}
				}
			},30)

		}
		function getStyle(obj,attr){
			if(obj.currentStyle){
				return obj.currentStyle[attr];
			}else{
				return getComputedStyle(obj,attr);
			}
		}
	</script>
</body>
</html>